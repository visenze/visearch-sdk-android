import android.content.Context;

import com.visenze.visearch.android.ProductSearch;
import com.visenze.visearch.android.ViSearch;

/**
 * This is a sample class to build a singleton instance
 * 
 */
public class SearchAPI {
    private static ViSearch viSearch;
    private static ProductSearch productSearch;

    public static ViSearch getInstance() throws Exception {
        if (viSearch == null) {
            throw new Exception("init instance before use");
        }
        return viSearch;
    }

    public static ProductSearch getProductSearchInstance() throws Exception {
        if (productSearch == null) {
            throw new Exception("init instance before use");
        }
        return productSearch;
    }

    /**
     * Initialise the ViSearcher with a valid access/secret key pair
     *
     * @param context   Activity context
     * @param appKey    the App Key
     */
    public static void initSearchAPI(Context context, String appKey) {
        viSearch = new ViSearch.Builder(appKey).build(context);
    }

    /**
     * Initialise the ProductSearcher with a valid access and placement ID
     *
     * @param context       Activity context
     * @param appKey        the App Key
     * @param placementId   the placement ID
     */
    public static void initProductSearchAPI(Context context, String appKey, Integer placementId) {
        productSearch = new ProductSearch.Builder(appKey, placementId).build(context);
    }
}
